<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ADF File System Modes • adfExplorer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ADF File System Modes">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">adfExplorer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/adf_objects.html">ADF S3 Class Objects</a></li>
    <li><a class="dropdown-item" href="../articles/file_system_modes.html">ADF File System Modes</a></li>
    <li><a class="dropdown-item" href="../articles/version2.html">Version 2.0</a></li>
    <li><a class="dropdown-item" href="../articles/virtual_paths.html">Virtual Paths</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/adfExplorer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>ADF File System Modes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/adfExplorer/blob/master/vignettes/file_system_modes.Rmd" class="external-link"><code>vignettes/file_system_modes.Rmd</code></a></small>
      <div class="d-none name"><code>file_system_modes.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="fast-file-system-vs--old-file-system">Fast File System vs. Old File System<a class="anchor" aria-label="anchor" href="#fast-file-system-vs--old-file-system"></a>
</h2>
<p>With Amiga OS version 2.0, the so-called Fast File System (FFS) was
introduced. The previous file system was not named at the time, but is
now commonly referred to as the Old File System (OFS). The OFS
sacrifices disk space for validation purposes, making it more robust in
case of data recovery when a disk got damaged. This advantage was
dropped with the FFS making it slightly faster (on original machines)
and gaining disk space for file data. The FFS does not have backward
compatability. So disks formatted with this file systems cannot be read
by Amiga OS versions &lt;2.0.</p>
</div>
<div class="section level2">
<h2 id="international-mode">International mode<a class="anchor" aria-label="anchor" href="#international-mode"></a>
</h2>
<p>In OS version 2.0 the ‘international mode’ was also introduced. This
mode was meant to correct for a mistake in the routine to convert text
into upper case. On the Amiga file names can have both lower and upper
case characters. But during file name matching, the case is ignored. For
that purpose, file names are shifted to upper case in file name matching
routines.</p>
<p>The Amiga uses the ISO 8859 Latin-1 character set, where in older
operating systems (&lt;2.0), international characters (e.g., ‘ø’) were
not capitalised. This mistake was corrected in OS 2.0, but is optional.
In combination with the ‘directory cache mode’ (see below), the
international mode is mandatory.</p>
</div>
<div class="section level2">
<h2 id="directory-caching">Directory Caching<a class="anchor" aria-label="anchor" href="#directory-caching"></a>
</h2>
<p>With Amiga OS 3.0, the ‘directory cache mode’ was introduced. With
the directory cache mode, one or more blocks are stored for each
directory (including the root) with basic information about the files
stored in that directory. In older versions, the directory header only
stored pointers to the files in that directory. This meant that in older
OS versions the header of each file (all scattered around the disk)
needed to be loaded, in order to list all files in that directory. As
with the directory cache mode all information was stored in one block
(or more when necessary), it was faster at listing directory content. On
the original machine that is, as floppy disk drives were pretty
slow.</p>
<p>Note that using the ‘directory cache’ mode requires a larger storage
overhead for the file system, leaving less capacity for actual file
data.</p>
</div>
<div class="section level2">
<h2 id="creating-disks-with-diferent-modes">Creating disks with diferent modes<a class="anchor" aria-label="anchor" href="#creating-disks-with-diferent-modes"></a>
</h2>
<p>When you create a blank disk with <code><a href="../reference/create_adf_device.html">create_adf_device()</a></code>,
it contains no data at all. In order to store files on the virtual disk,
you need to format it with a file system. This can be achieved with
<code><a href="../reference/create_adf_device.html">prepare_adf_device()</a></code>. With this function you can also
specify which of the modes listed above you want to use for that
disk:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pepijn-devries.github.io/adfExplorer/">adfExplorer</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">disk_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".adf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Create a blank device and create a connection to it:</span></span>
<span><span class="va">new_device</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_adf_device.html">create_adf_device</a></span><span class="op">(</span><span class="va">disk_file</span>, write_protected <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Format the device and install a file system:</span></span>
<span><span class="fu"><a href="../reference/create_adf_device.html">prepare_adf_device</a></span><span class="op">(</span></span>
<span>  dev           <span class="op">=</span> <span class="va">new_device</span>,</span>
<span>  name          <span class="op">=</span> <span class="st">"Example_disk"</span>,</span>
<span>  ffs           <span class="op">=</span> <span class="cn">TRUE</span>,  <span class="co">## Use fast file system</span></span>
<span>  international <span class="op">=</span> <span class="cn">TRUE</span>,  <span class="co">## Use international mode</span></span>
<span>  dircache      <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co">## Don't use directory caching.</span></span>
<span><span class="co">#&gt; Bootable DOS Floppy DD</span></span>
<span><span class="co">#&gt;   Volume 0 [fi-]: Example_disk (0.2%)</span></span>
<span></span>
<span><span class="co">## Don't forget to close the connection when you are done:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">new_device</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries, Laurent Clévy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
