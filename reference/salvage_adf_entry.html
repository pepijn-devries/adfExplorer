<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Salvage entries on ADF disks — adf_dumpster_dive • adfExplorer</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Salvage entries on ADF disks — adf_dumpster_dive"><meta name="description" content="Functions to attempt to salvage files and directories from
virtual disks (ADF)."><meta property="og:description" content="Functions to attempt to salvage files and directories from
virtual disks (ADF)."><meta property="og:image" content="https://pepijn-devries.github.io/adfExplorer/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">adfExplorer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.3.0005</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/adf_objects.html">ADF S3 Class Objects</a></li>
    <li><a class="dropdown-item" href="../articles/file_system_modes.html">ADF File System Modes</a></li>
    <li><a class="dropdown-item" href="../articles/version2.html">Version 2.0</a></li>
    <li><a class="dropdown-item" href="../articles/virtual_paths.html">Virtual Paths</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/adfExplorer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Salvage entries on ADF disks</h1>
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/adfExplorer/blob/master/R/undelete.R" class="external-link"><code>R/undelete.R</code></a></small>
      <div class="d-none name"><code>salvage_adf_entry.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Functions to attempt to salvage files and directories from
virtual disks (ADF).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">adf_dumpster_dive</span><span class="op">(</span><span class="va">dev</span>, vol <span class="op">=</span> <span class="fl">0L</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">salvage_adf_entry</span><span class="op">(</span><span class="va">dev</span>, vol <span class="op">=</span> <span class="fl">0L</span>, <span class="va">sector</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dev">dev<a class="anchor" aria-label="anchor" href="#arg-dev"></a></dt>
<dd><p>The virtual adf device for which information needs to be obtained.
It should be of class <code>adf_device</code> which can be created with <code><a href="create_adf_device.html">create_adf_device()</a></code>
or <code><a href="connect_adf.html">connect_adf()</a></code>.</p></dd>


<dt id="arg-vol">vol<a class="anchor" aria-label="anchor" href="#arg-vol"></a></dt>
<dd><p>Volume index number on the device starting at <code>0</code>. Default is <code>0</code>.
Note that floppy disks can only have 1 volume installed.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Ignored</p></dd>


<dt id="arg-sector">sector<a class="anchor" aria-label="anchor" href="#arg-sector"></a></dt>
<dd><p>Sector number of the file/directory header that you wish to
salvage</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>In case of <code>adf_dumpster_dive()</code> a <code>data.frame</code> is returned
with records that could potentially be salvaged from the disk.
In case of <code>salvage_adf_entry()</code>, the <code>disk</code> (<code>adf_device</code> class object)
is returned, where (if successful) the record is restored.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When a file or directory is removed from a virtual device (or
a physical device for that matter), the record is removed from
its parent directory hash table and its bitmap flags are flipped to
mark the file blocks as available. This means that the actual
record of the file and its contents is still on the disk, until
they are overwritten. You can use these functions to salvage such
entries.</p>
<p>You can use <code>adf_dumster_dive()</code> to scan for entries that could
potentially be salvaged. Than you can use <code>salvage_adf_entry()</code>
to attempt to salvage an entry.</p>
<p>Note that these functions won't work when you have flushed the file
(see <code><a href="remove_adf_entry.html">remove_adf_entry()</a></code>). In that case the actual record of the file
and its data have been permanently removed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">my_device</span> <span class="op">&lt;-</span> <span class="fu"><a href="demo_adf.html">demo_adf</a></span><span class="op">(</span>write_protected <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The demo disk contains a deleted file that could be salvaged:</span></span></span>
<span class="r-in"><span><span class="va">salvageable</span> <span class="op">&lt;-</span> <span class="fu">adf_dumpster_dive</span><span class="op">(</span><span class="va">my_device</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's recover it:</span></span></span>
<span class="r-in"><span><span class="fu">salvage_adf_entry</span><span class="op">(</span><span class="va">my_device</span>, sector <span class="op">=</span> <span class="va">salvageable</span><span class="op">$</span><span class="va">sect</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bootable DOS Floppy DD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Volume 0 [-i-]: adfExampleOFS (2.2%)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># It is now listed as an entry on the disk:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="list_adf_entries.html">list_adf_entries</a></span><span class="op">(</span><span class="va">my_device</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DIR  DEWR...     Devs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FILE DEWR...iguration</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DIR  DEWR...        S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FILE DEWR...-Sequence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DIR  DEWR...     this</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DIR  DEWR...       is</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DIR  DEWR...        a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DIR  DEWR...     deep</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DIR  DEWR...     path</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DIR  DEWR...     mods</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FILE DEWR...mod.intro</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FILE DEWR...r egg.txt</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">my_device</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries, Laurent Clévy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

