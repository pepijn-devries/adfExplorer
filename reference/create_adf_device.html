<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create and format a virtual ADF device — create_adf_device • adfExplorer</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create and format a virtual ADF device — create_adf_device"><meta name="description" content="These functions help you to create an empty virtual device that can be used
in Commodore Amiga emulation. create_adf_device() simply creates a file
of the proper size (the file size represents the device capacity) and fills it
with raw zeros. In order to use the device in the Amiga operating system, a
file system needs to be installed on the device. This can be achieved with
prepare_adf_device(). Note that the file system itself will also consume
disk space on the virtual device."><meta property="og:description" content="These functions help you to create an empty virtual device that can be used
in Commodore Amiga emulation. create_adf_device() simply creates a file
of the proper size (the file size represents the device capacity) and fills it
with raw zeros. In order to use the device in the Amiga operating system, a
file system needs to be installed on the device. This can be achieved with
prepare_adf_device(). Note that the file system itself will also consume
disk space on the virtual device."><meta property="og:image" content="https://pepijn-devries.github.io/adfExplorer/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">adfExplorer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.3.0002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/adf_objects.html">ADF S3 Class Objects</a></li>
    <li><a class="dropdown-item" href="../articles/file_system_modes.html">ADF File System Modes</a></li>
    <li><a class="dropdown-item" href="../articles/version2.html">Version 2.0</a></li>
    <li><a class="dropdown-item" href="../articles/virtual_paths.html">Virtual Paths</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/adfExplorer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create and format a virtual ADF device</h1>
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/adfExplorer/blob/master/R/device_create.R" class="external-link"><code>R/device_create.R</code></a></small>
      <div class="d-none name"><code>create_adf_device.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions help you to create an empty virtual device that can be used
in Commodore Amiga emulation. <code>create_adf_device()</code> simply creates a file
of the proper size (the file size represents the device capacity) and fills it
with <code>raw</code> zeros. In order to use the device in the Amiga operating system, a
file system needs to be installed on the device. This can be achieved with
<code>prepare_adf_device()</code>. Note that the file system itself will also consume
disk space on the virtual device.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_adf_device</span><span class="op">(</span><span class="va">destination</span>, type <span class="op">=</span> <span class="st">"DD"</span>, <span class="va">...</span>, connect <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">prepare_adf_device</span><span class="op">(</span></span>
<span>  <span class="va">dev</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"EMPTY"</span>,</span>
<span>  ffs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  international <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dircache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bootable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'adf_device'</span></span>
<span><span class="fu">prepare_adf_device</span><span class="op">(</span></span>
<span>  <span class="va">dev</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"EMPTY"</span>,</span>
<span>  ffs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  international <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dircache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bootable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-destination">destination<a class="anchor" aria-label="anchor" href="#arg-destination"></a></dt>
<dd><p>File path where the virtual device needs to be stored.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>Specify the type of virtual device you wish to create.
Should be one of <code>"DD"</code> (double density floppy disk) or <code>"HD"</code> (high
density floppy disk).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Ignored for <code>prepare_adf_device()</code>.</p></dd>


<dt id="arg-connect">connect<a class="anchor" aria-label="anchor" href="#arg-connect"></a></dt>
<dd><p>A <code>logical</code> value. If set to <code>TRUE</code> a connection is opened to the
newly created virtual device and is returned as a <code>adf_device</code> class object. If
it is set to <code>FALSE</code>, the file is just created and no connection is opened. In the
latter case <code>NULL</code> is returned invisibly.</p></dd>


<dt id="arg-dev">dev<a class="anchor" aria-label="anchor" href="#arg-dev"></a></dt>
<dd><p>The virtual adf device for which information needs to be obtained.
It should be of class <code>adf_device</code> which can be created with <code>create_adf_device()</code>
or <code><a href="connect_adf.html">connect_adf()</a></code>.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>A <code>character</code> string specifying the disk name for the volume on the
virtual device. It will be truncated automatically when too long.</p></dd>


<dt id="arg-ffs">ffs<a class="anchor" aria-label="anchor" href="#arg-ffs"></a></dt>
<dd><p>A <code>logical</code> value indicating which file system to be used. If <code>TRUE</code>
the 'Fast File System' (FFS) is used, when <code>FALSE</code>, the 'Old File System' is used.
See also <code><a href="../articles/file_system_modes.html">vignette("file_system_modes")</a></code>.</p></dd>


<dt id="arg-international">international<a class="anchor" aria-label="anchor" href="#arg-international"></a></dt>
<dd><p>A <code>logical</code> value indicating whether the international mode
should be used for file naming. See also <code><a href="../articles/file_system_modes.html">vignette("file_system_modes")</a></code>.</p></dd>


<dt id="arg-dircache">dircache<a class="anchor" aria-label="anchor" href="#arg-dircache"></a></dt>
<dd><p>A <code>logical</code> value indicating whether directory caching should be
used. See also <code><a href="../articles/file_system_modes.html">vignette("file_system_modes")</a></code>.</p></dd>


<dt id="arg-bootable">bootable<a class="anchor" aria-label="anchor" href="#arg-bootable"></a></dt>
<dd><p>A <code>logical</code> value indicating whether you want to include executable
code on the boot block. If set to <code>TRUE</code> minimal code will be added to the boot block.
In an Amiga emulator, this code will load the Amiga Disk Operating System library
and start the Amiga Command line interface (CLI). It will then run the startup
sequence file from the disk (if available).</p>
<p>If set to <code>FALSE</code> no such code is added. In that case the file system will still be
accessible by the Amiga operating system (if the file system mode is compatible).
You just can't use the disk to start up a (virtual) Amiga machine.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Either an <code>adf_device</code> connection or <code>NULL</code> depending on the value of
<code>connect</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Pepijn de Vries</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Filepath to store the virtual device:</span></span></span>
<span class="r-in"><span><span class="va">dest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".adf"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a blank unformated virtual device (a double density floppy disk):</span></span></span>
<span class="r-in"><span><span class="va">my_device</span> <span class="op">&lt;-</span> <span class="fu">create_adf_device</span><span class="op">(</span><span class="va">dest</span>, <span class="st">"DD"</span>, connect <span class="op">=</span> <span class="cn">TRUE</span>, write_protected <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">my_device</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Non-bootable unformatted Floppy DD</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Format the floppy and create a file system on the device:</span></span></span>
<span class="r-in"><span><span class="fu">prepare_adf_device</span><span class="op">(</span><span class="va">my_device</span>, name <span class="op">=</span> <span class="st">"foobar"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bootable DOS Floppy DD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Volume 0 [fi-]: foobar (0.2%)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">my_device</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bootable DOS Floppy DD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Volume 0 [fi-]: foobar (0.2%)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## don't forget to close the device connection after use:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">my_device</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries, Laurent Clévy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

